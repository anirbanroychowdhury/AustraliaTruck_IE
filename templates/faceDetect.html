{% extends 'base.html' %}
{% load static %}
{%block stylesheets%}
    <!-- CSS here -->
    <link rel="stylesheet" href="{% static "/css/bootstrap.min.css" %}">
    <link rel="stylesheet" href="{% static "/css/owl.carousel.min.css" %}">
    <link rel="stylesheet" href="{% static "/css/slicknav.css" %}">
    <link rel="stylesheet" href="{% static "/css/flaticon.css" %}">
    <link rel="stylesheet" href="{% static "/css/animate.min.css" %}">
    <link rel="stylesheet" href="{% static "/css/magnific-popup.css" %}">
    <link rel="stylesheet" href="{% static "/css/fontawesome-all.min.css" %}">
    <link rel="stylesheet" href="{% static "/css/themify-icons.css" %}">
    <link rel="stylesheet" href="{% static "/css/slick.css" %}">
    <link rel="stylesheet" href="{% static "/css/nice-select.css" %}">
    <link rel="stylesheet" href="{% static "/css/style.css" %}">
{%endblock stylesheets%}
{% block content %}


    <main>

        <!-- Hero Start-->

        <div class="hero-area2  slider-height2 hero-overly2 d-flex align-items-center " data-background="{% static "/img/hero/h2_hero.jpg"%}">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="hero-cap text-center pt-50">
                            <h2>Face Detection</h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <div class="container box_1170" style="text-align:center;">
                <br><br>
                <h2 class="text-heading">Camera Video</h2>
                  <div class="invisible" >
                    <video id="video" style="visibility: visible;">Your browser does not support the video tag.</video>
                  </div>
                <br><br>
                <h2 class="text-heading">Face Detection</h2>
                    <div class="image">
                        <img id="returned-image">
                    </div>
                <br><br>
            <section class="sample-text-area">
            <div class="container box_1170">
                <h2 class="text-heading">NOTE: This application requires webcam access. It will not work if it is being used by another application(e.g. Zoom)</h2>
                <h2 class="text-heading">EAR: Eyes Average Ratio</h2>
                <p class="sample-text" >
                By detecting your eyes and keeping a track of how long they stay closed and the amount you blink we can measure your fatigue levels. Anytime EAR goes below 0.2 for more than 15seconds an alarm will be played to WAKE YOU UP!
                </p>
            </div>
        </section>
            </div>
        <br><br>

    <audio id="alarmSound" src="{% static 'alarm.wav' %}"></audio>
    </main>

{% endblock content %}

{% block scripts %}
<script src="{% static 'js/faceDetection.js' %}"></script>
<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
<script src="https://threejs.org/examples/js/libs/stats.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.5/dat.gui.min.js"></script>
<script>
  var Module = {
     wasmBinaryFile: 'https://huningxin.github.io/opencv.js/build/wasm/opencv_js.wasm',
    preRun: [function() {
      Module.FS_createPreloadedFile('/', 'haarcascade_eye.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_eye.xml', true, false);
      Module.FS_createPreloadedFile('/', 'haarcascade_frontalface_default.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_frontalface_default.xml', true, false);
      Module.FS_createPreloadedFile('/', 'haarcascade_profileface.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_profileface.xml', true, false);
    }],
    _main: function() {opencvIsReady();}
  };
</script>
<script async src="https://huningxin.github.io/opencv.js/build/wasm/opencv.js"></script>

{% endblock scripts %}

